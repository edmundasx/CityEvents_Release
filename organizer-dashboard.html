<!DOCTYPE html>
<html lang="lt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Organizatoriaus skydelis - CityEvents</title>
    

    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/organizer-dashboard.css">
    <link rel="stylesheet" href="assets/css/navbar.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="header-left">
                <a href="index.html" class="logo">CityEvents</a>
                <nav class="nav">
                    <a href="index.html" class="nav-link">NarÅ¡yti renginius</a>
                    <a href="create-event.html" class="nav-link">Sukurti renginÄ¯</a>
                    <a href="organizer-events.html" class="nav-link">Mano renginiai</a>
                    <a href="organizer-dashboard.html" class="nav-link active">Skydelis</a>
                </nav>
            </div>
            <div class="header-right">
                <div class="header-actions" id="authActions"></div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Page Header -->
        <div class="page-header">
            <h1>ğŸ‘‹ Sveiki, Jonas!</h1>
            <p>ÄŒia galite valdyti savo renginius ir stebÄ—ti statistikÄ…</p>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid" id="statsGrid">
            <!-- Stats will be rendered here -->
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
            <a href="create-event.html" class="action-card">
                <div class="action-icon">â•</div>
                <div class="action-content">
                    <h3>Sukurti naujÄ… renginÄ¯</h3>
                    <p>Paskelbkite naujÄ… renginÄ¯ ir pasiekite dalyvius</p>
                </div>
            </a>
            <a href="organizer-events.html" class="action-card">
                <div class="action-icon">ğŸ“‹</div>
                <div class="action-content">
                    <h3>PerÅ¾iÅ«rÄ—ti mano renginius</h3>
                    <p>Valdykite visus savo pateiktus renginius</p>
                </div>
            </a>
            <a href="city-map.html" class="action-card">
                <div class="action-icon">ğŸ—ºï¸</div>
                <div class="action-content">
                    <h3>Miesto Å¾emÄ—lapis</h3>
                    <p>PerÅ¾iÅ«rÄ—kite visus renginius Å¾emÄ—lapyje</p>
                </div>
            </a>
        </div>

        <!-- Content Grid -->
        <div class="content-grid">
            <!-- Left Column -->
            <div class="left-column">
                <!-- Recent Events -->
                <div class="card" style="margin-bottom: 1.5rem;">
                    <div class="card-header">
                        <h2>ğŸ“… Naujausi renginiai</h2>
                        <a href="organizer-events.html">PerÅ¾iÅ«rÄ—ti visus â†’</a>
                    </div>
                    <div class="card-body">
                        <div class="recent-events" id="recentEvents">
                            <!-- Events will be rendered here -->
                        </div>
                    </div>
                </div>

                <!-- Activity -->
                <div class="card">
                    <div class="card-header">
                        <h2>ğŸ”” PaskutinÄ— veikla</h2>
                    </div>
                    <div class="card-body">
                        <div class="activity-list" id="activityList">
                            <!-- Activity will be rendered here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column -->
            <div class="right-column">
                <!-- Profile Card -->
                <div class="card" style="margin-bottom: 1.5rem;">
                    <div class="profile-card">
                        <div class="profile-avatar" id="profileAvatar">JD</div>
                        <h3 id="profileName">Jonas DaukÅ¡a</h3>
                        <p class="role">Organizatorius</p>
                        <p class="email" id="profileEmail">jonas@example.com</p>
                        <button class="profile-btn" onclick="openProfileModal()">
                            âœï¸ Redaguoti profilÄ¯
                        </button>
                    </div>
                </div>

                <!-- Tips -->
                <div class="card">
                    <div class="card-header">
                        <h2>ğŸ’¡ Patarimai</h2>
                    </div>
                    <div class="card-body">
                        <div class="tips-list">
                            <div class="tip-item">
                                <span>ğŸ“¸</span>
                                <p>PridÄ—kite kokybiÅ¡kas nuotraukas - renginiai su vaizdais sulaukia 3x daugiau perÅ¾iÅ«rÅ³</p>
                            </div>
                            <div class="tip-item">
                                <span>ğŸ“</span>
                                <p>RaÅ¡ykite iÅ¡samius apraÅ¡ymus su visa reikalinga informacija dalyviams</p>
                            </div>
                            <div class="tip-item">
                                <span>â°</span>
                                <p>Paskelbkite renginius bent 2 savaites prieÅ¡ datÄ…</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div class="modal-overlay" id="profileModal">
        <div class="modal">
            <div class="modal-header">
                <h2>Redaguoti profilÄ¯</h2>
                <button class="modal-close" onclick="closeProfileModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="profileForm">
                    <div class="form-group">
                        <label for="editName">Vardas ir pavardÄ—</label>
                        <input type="text" id="editName" placeholder="Ä®veskite vardÄ…">
                    </div>
                    <div class="form-group">
                        <label for="editEmail">El. paÅ¡tas</label>
                        <input type="email" id="editEmail" placeholder="Ä®veskite el. paÅ¡tÄ…">
                    </div>
                    <div class="form-group">
                        <label for="editPhone">Telefono numeris</label>
                        <input type="tel" id="editPhone" placeholder="+370 600 00000">
                    </div>
                    <div class="form-group">
                        <label for="editCompany">Organizacijos pavadinimas</label>
                        <input type="text" id="editCompany" placeholder="Ä®veskite organizacijos pavadinimÄ…">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeProfileModal()">AtÅ¡aukti</button>
                <button class="btn btn-primary" onclick="saveProfile()">IÅ¡saugoti</button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast">
        <span>âœ“</span>
        <span id="toastMessage">Profilis atnaujintas sÄ—kmingai!</span>
    </div>

    <script src="assets/js/api.js"></script>
    <script src="assets/js/app.js"></script>
    <script>
        // Mock data
        const organizerData = {
            name: 'Jonas DaukÅ¡a',
            email: 'jonas@example.com',
            phone: '+370 612 34567',
            company: 'Vilniaus Renginiai UAB'
        };

        const events = [
            {
                id: 1,
                title: "KalÄ—dinis mugÄ— Katedros aikÅ¡tÄ—je",
                image: "https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=400",
                date: "GruodÅ¾io 20, 10:00",
                status: "approved"
            },
            {
                id: 2,
                title: "Naujametinis koncertas",
                image: "https://images.unsplash.com/photo-1459749411175-04bf5292ceea?w=400",
                date: "GruodÅ¾io 31, 22:00",
                status: "pending"
            },
            {
                id: 3,
                title: "Verslo konferencija 2025",
                image: "https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=400",
                date: "Sausio 15, 09:00",
                status: "approved"
            },
            {
                id: 4,
                title: "Sporto Å¡ventÄ— vaikams",
                image: "https://images.unsplash.com/photo-1571019614242-c5c5dee9f50b?w=400",
                date: "Sausio 20, 11:00",
                status: "rejected"
            }
        ];

        const activities = [
            { type: 'success', icon: 'âœ“', message: 'Renginys "KalÄ—dinis mugÄ—" patvirtintas', time: 'PrieÅ¡ 2 val.' },
            { type: 'warning', icon: 'â³', message: 'Renginys "Naujametinis koncertas" laukia patvirtinimo', time: 'PrieÅ¡ 5 val.' },
            { type: 'info', icon: 'ğŸ‘ï¸', message: '156 naujos perÅ¾iÅ«ros jÅ«sÅ³ renginiuose', time: 'Å iandien' },
            { type: 'danger', icon: 'âœ—', message: 'Renginys "Sporto Å¡ventÄ—" atmestas', time: 'Vakar' },
            { type: 'success', icon: 'ğŸ‘¤', message: '12 naujÅ³ registracijÅ³ Ä¯ "Verslo konferencija"', time: 'Vakar' }
        ];

        // Initialize
        function init() {
            loadProfileData();
            renderStats();
            renderRecentEvents();
            renderActivity();
        }

        // Load profile data from localStorage
        function loadProfileData() {
            const saved = localStorage.getItem('organizerProfile');
            if (saved) {
                Object.assign(organizerData, JSON.parse(saved));
            }
            updateProfileDisplay();
        }

        // Update profile display
        function updateProfileDisplay() {
            const initials = organizerData.name.split(' ').map(n => n[0]).join('').toUpperCase();
            document.getElementById('profileAvatar').textContent = initials;
            document.getElementById('profileName').textContent = organizerData.name;
            document.getElementById('profileEmail').textContent = organizerData.email;
            
            // Update header avatar
            document.querySelector('.user-avatar').textContent = initials;
            document.querySelector('.user-menu span').textContent = organizerData.name.split(' ')[0] + ' ' + organizerData.name.split(' ')[1]?.[0] + '.';
        }

        // Render stats
        function renderStats() {
            const approved = events.filter(e => e.status === 'approved').length;
            const pending = events.filter(e => e.status === 'pending').length;
            const rejected = events.filter(e => e.status === 'rejected').length;

            const stats = [
                { icon: 'ğŸ“Š', iconClass: 'primary', value: events.length, label: 'Viso renginiÅ³' },
                { icon: 'âœ“', iconClass: 'success', value: approved, label: 'Patvirtinta' },
                { icon: 'â³', iconClass: 'warning', value: pending, label: 'Laukia patvirtinimo' },
                { icon: 'âœ—', iconClass: 'danger', value: rejected, label: 'Atmesta' }
            ];

            document.getElementById('statsGrid').innerHTML = stats.map(stat => `
                <div class="stat-card">
                    <div class="icon ${stat.iconClass}">${stat.icon}</div>
                    <div class="value">${stat.value}</div>
                    <div class="label">${stat.label}</div>
                </div>
            `).join('');
        }

        // Render recent events
        function renderRecentEvents() {
            document.getElementById('recentEvents').innerHTML = events.map(event => `
                <div class="recent-event-item">
                    <img src="${event.image}" alt="${event.title}">
                    <div class="recent-event-info">
                        <h4>${event.title}</h4>
                        <p>ğŸ“… ${event.date}</p>
                    </div>
                    <div class="recent-event-status">
                        <span class="status-badge ${event.status}">
                            ${getStatusText(event.status)}
                        </span>
                    </div>
                </div>
            `).join('');
        }

        // Get status text
        function getStatusText(status) {
            const texts = {
                approved: 'Patvirtinta',
                pending: 'Laukiama',
                rejected: 'Atmesta'
            };
            return texts[status] || status;
        }

        // Render activity
        function renderActivity() {
            document.getElementById('activityList').innerHTML = activities.map(activity => `
                <div class="activity-item">
                    <div class="activity-icon ${activity.type}">${activity.icon}</div>
                    <div class="activity-content">
                        <p>${activity.message}</p>
                        <span>${activity.time}</span>
                    </div>
                </div>
            `).join('');
        }

        // Modal functions
        function openProfileModal() {
            document.getElementById('editName').value = organizerData.name;
            document.getElementById('editEmail').value = organizerData.email;
            document.getElementById('editPhone').value = organizerData.phone;
            document.getElementById('editCompany').value = organizerData.company;
            document.getElementById('profileModal').classList.add('active');
        }

        function closeProfileModal() {
            document.getElementById('profileModal').classList.remove('active');
        }

        function saveProfile() {
            organizerData.name = document.getElementById('editName').value;
            organizerData.email = document.getElementById('editEmail').value;
            organizerData.phone = document.getElementById('editPhone').value;
            organizerData.company = document.getElementById('editCompany').value;

            localStorage.setItem('organizerProfile', JSON.stringify(organizerData));
            updateProfileDisplay();
            closeProfileModal();
            showToast('Profilis atnaujintas sÄ—kmingai!');
        }

        // Toast
        function showToast(message) {
            const toast = document.getElementById('toast');
            document.getElementById('toastMessage').textContent = message;
            toast.classList.add('show', 'success');
            setTimeout(() => {
                toast.classList.remove('show', 'success');
            }, 3000);
        }

        // Close modal on overlay click
        document.getElementById('profileModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeProfileModal();
            }
        });

        // Initialize on load
        init();
    </script>
</body>
</html>
